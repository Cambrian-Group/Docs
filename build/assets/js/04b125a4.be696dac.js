"use strict";(self.webpackChunkcelo_docs=self.webpackChunkcelo_docs||[]).push([[8420],{3905:function(e,t,o){o.d(t,{Zo:function(){return d},kt:function(){return u}});var n=o(67294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(o),u=a,f=p["".concat(l,".").concat(u)]||p[u]||h[u]||r;return o?n.createElement(f,i(i({ref:t},d),{},{components:o})):n.createElement(f,i({ref:t},d))}));function u(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<r;c++)i[c]=o[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},4394:function(e,t,o){o.r(t),o.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return d},default:function(){return p}});var n=o(83117),a=o(80102),r=(o(67294),o(3905)),i=["components"],s={title:"Celo Validator Penalties",description:"Introduction to validator penalties, enforcement mechanisms, and conditions."},l="Validator Penalties",c={unversionedId:"celo-codebase/protocol/proof-of-stake/penalties",id:"celo-codebase/protocol/proof-of-stake/penalties",title:"Celo Validator Penalties",description:"Introduction to validator penalties, enforcement mechanisms, and conditions.",source:"@site/docs/celo-codebase/protocol/proof-of-stake/penalties.md",sourceDirName:"celo-codebase/protocol/proof-of-stake",slug:"/celo-codebase/protocol/proof-of-stake/penalties",permalink:"/celo-codebase/protocol/proof-of-stake/penalties",editUrl:"https://github.com/celo-org/docs/edit/main/docs/celo-codebase/protocol/proof-of-stake/penalties.md",tags:[],version:"current",frontMatter:{title:"Celo Validator Penalties",description:"Introduction to validator penalties, enforcement mechanisms, and conditions."},sidebar:"docs",previous:{title:"Carbon Offsetting Fund",permalink:"/celo-codebase/protocol/proof-of-stake/epoch-rewards/carbon-offsetting-fund"},next:{title:"Celo Governance",permalink:"/celo-codebase/protocol/governance"}},d=[{value:"What is Slashing?",id:"what-is-slashing",children:[],level:2},{value:"Enforcement Mechanisms",id:"enforcement-mechanisms",children:[],level:2},{value:"Slashing Conditions",id:"slashing-conditions",children:[{value:"Provable",id:"provable",children:[],level:3},{value:"<strong>Governed</strong>",id:"governed",children:[],level:3}],level:2}],h={toc:d};function p(e){var t=e.components,o=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},h,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"validator-penalties"},"Validator Penalties"),(0,r.kt)("p",null,"Introduction to validator penalties, enforcement mechanisms, and conditions."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"what-is-slashing"},"What is Slashing?"),(0,r.kt)("p",null,"Slashing accomplishes punishment of misbehaving validators by seizing a portion of their stake. Without these punishments, for example, the Celo Protocol would be subject to the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethereum/wiki/wiki/Proof-of-Stake-FAQ#what-is-the-nothing-at-stake-problem-and-how-can-it-be-fixed"},"nothing at stake")," problem. Validator misbehavior is classified as a set of slashing conditions below."),(0,r.kt)("h2",{id:"enforcement-mechanisms"},"Enforcement Mechanisms"),(0,r.kt)("p",null,"The protocol has three means of recourse for validator misbehavior. Each slashing condition applies a combination of these, as described below."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Slashing of validator and group stake -")," Some slashing conditions take a fixed amount of the Locked Gold stake put up by a validator. In these cases, the group through which that validator was elected for the epoch in which the slashing condition was proven is also slashed the same fixed amount. A validator or group's stake may be forfeit while it is registered or, after being deregistered, during the notice period (60 days for validators, 180 days for groups) and before the amount is withdrawn from the ",(0,r.kt)("inlineCode",{parentName:"p"},"LockedGold")," contract.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Suppression of future rewards -")," Every validator group has a ",(0,r.kt)("strong",{parentName:"p"},"slashing penalty"),", initially ",(0,r.kt)("inlineCode",{parentName:"p"},"1.0"),". All rewards to the group and to voters for the group are weighted by this factor. If a validator is slashed, the group through which that validator was elected for the epoch in which it misbehaved has the value of its slashing penalty halved. So long as no further slashing occurs, the slashing penalty is reset to ",(0,r.kt)("inlineCode",{parentName:"p"},"1.0")," after ",(0,r.kt)("inlineCode",{parentName:"p"},"slashing_penalty_reset_epochs")," epochs.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Ejection -")," When a validator is slashed, it is immediately removed from the group of which it is currently a member (even if this group is not the group that elected the validator at the point the misbehavior was recorded). Since no changes in the active validator set are made during an epoch, this means an elected validator continues participate in consensus until the end of the epoch. The group can choose to re-add the validator at any point, provided the usual conditions are met (including that the validator has sufficient Locked Gold as stake)."))),(0,r.kt)("h2",{id:"slashing-conditions"},"Slashing Conditions"),(0,r.kt)("p",null,"There are three categories of slashing conditions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Provable ","(","initiated off-chain, verifiable on-chain",")"),(0,r.kt)("li",{parentName:"ul"},"Governed ","(","verified only by off-chain knowledge",")")),(0,r.kt)("h3",{id:"provable"},"Provable"),(0,r.kt)("p",null,"Provable slashing conditions cannot be initiated automatically on chain but information provided from an external source can be definitively verified on-chain."),(0,r.kt)("p",null,'In exchange for sending a transaction which initiates a successful provable slashing condition on-chain, the reporter receives a "reward", a portion of the slashed amount (which will always be greater than the gas costs of the proof). The reward is added to the reporter\'s balance of non-voting LockedGold. The remainder of the slashed amount is sent to the ',(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/proof-of-stake/epoch-rewards/community-fund"},"Community Fund"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Persistent downtime -")," A validator which can be shown to be absent from 8640 consecutive BLS signatures will be slashed 100 CELO, have future rewards suppressed, and (most importantly in this case) will be ejected from its current group.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Double Signing -")," A validator which can be shown to have produced BLS signatures for 2 distinct blocks at the same height and in the same consensus round but with different hashes will be slashed 9000 CELO, have future rewards suppressed, and will be ejected from its current group. Note that unlike some proof-of-stake networks, Celo does not penalize validators for double signing regular consensus messages. In particular, one side-effect of how Celo provides liveness can result in cases where honest validators may legitimately double sign blocks across different rounds at the same height (Cosmos terms this ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/tendermint/spec/blob/fa3430ad163a2a0ed77aa3f624a70cd9b8b84b78/spec/consensus/signing.md#other-rules"},"amnesia")," and also specifically excludes it from slashing)."))),(0,r.kt)("h3",{id:"governed"},(0,r.kt)("strong",{parentName:"h3"},"Governed")),(0,r.kt)("p",null,"For misbehavior which is harder to formally classify and requires some off-chain knowledge, slashing can be performed via ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/governance"},"governance proposals"),". These conditions are important for preventing nuanced validator attacks."))}p.isMDXComponent=!0}}]);