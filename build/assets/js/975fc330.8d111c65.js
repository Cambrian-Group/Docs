"use strict";(self.webpackChunkcelo_docs=self.webpackChunkcelo_docs||[]).push([[8947],{3905:function(e,t,o){o.d(t,{Zo:function(){return d},kt:function(){return h}});var n=o(67294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var l=n.createContext({}),s=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},d=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),u=s(o),h=a,f=u["".concat(l,".").concat(h)]||u[h]||p[h]||r;return o?n.createElement(f,i(i({ref:t},d),{},{components:o})):n.createElement(f,i({ref:t},d))}));function h(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var s=2;s<r;s++)i[s]=o[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}u.displayName="MDXCreateElement"},26582:function(e,t,o){o.r(t),o.d(t,{frontMatter:function(){return c},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return d},default:function(){return u}});var n=o(83117),a=o(80102),r=(o(67294),o(3905)),i=["components"],c={title:"Locked CELO and Voting",description:"Introduction to locked CELO and how to use validator elections to participate in voting."},l="Locked CELO and Voting",s={unversionedId:"celo-codebase/protocol/proof-of-stake/locked-gold",id:"celo-codebase/protocol/proof-of-stake/locked-gold",title:"Locked CELO and Voting",description:"Introduction to locked CELO and how to use validator elections to participate in voting.",source:"@site/docs/celo-codebase/protocol/proof-of-stake/locked-gold.md",sourceDirName:"celo-codebase/protocol/proof-of-stake",slug:"/celo-codebase/protocol/proof-of-stake/locked-gold",permalink:"/celo-codebase/protocol/proof-of-stake/locked-gold",editUrl:"https://github.com/celo-org/docs/edit/main/docs/celo-codebase/protocol/proof-of-stake/locked-gold.md",tags:[],version:"current",frontMatter:{title:"Locked CELO and Voting",description:"Introduction to locked CELO and how to use validator elections to participate in voting."},sidebar:"docs",previous:{title:"Celo Validator Groups",permalink:"/celo-codebase/protocol/proof-of-stake/validator-groups"},next:{title:"Celo Validator Elections",permalink:"/celo-codebase/protocol/proof-of-stake/validator-elections"}},d=[{value:"Validator Election Participation",id:"validator-election-participation",children:[],level:2},{value:"Concurrent Use of Locked CELO",id:"concurrent-use-of-locked-celo",children:[],level:2},{value:"Unlocking Period",id:"unlocking-period",children:[],level:2},{value:"Locking and Voting Flow",id:"locking-and-voting-flow",children:[],level:2}],p={toc:d};function u(e){var t=e.components,o=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"locked-celo-and-voting"},"Locked CELO and Voting"),(0,r.kt)("p",null,"Introduction to Celo locked gold (CELO) and how to use validator elections to participate in voting."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},'This page references "Locked Gold". The native asset of Celo was called Celo Gold (cGLD), but is now called CELO. Many references have been updated, but code and smart contract references may still mention Gold as it is more difficult to reliably and securely update the protocol code.  '))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"validator-election-participation"},"Validator Election Participation"),(0,r.kt)("p",null,"To participate in validator elections, users must first make a transfer of CELO to the ",(0,r.kt)("inlineCode",{parentName:"p"},"LockedGold")," smart contract."),(0,r.kt)("h2",{id:"concurrent-use-of-locked-celo"},"Concurrent Use of Locked CELO"),(0,r.kt)("p",null,"Locking up CELO guarantees that the same asset is not used more than once in the same vote. However every unit of Locked CELO can be deployed in several ways at once. Using an amount for voting for a validator does not preclude that same amount also being used to vote for a governance proposal, or as a stake at the same time. Users do not need to choose whether to have to move funds from validator elections in order to vote on a governance proposal."),(0,r.kt)("h2",{id:"unlocking-period"},"Unlocking Period"),(0,r.kt)("p",null,"Celo implements an ",(0,r.kt)("strong",{parentName:"p"},"unlocking period"),", a delay of 3 days after making a request to unlock Locked CELO before it can be recovered from the escrow."),(0,r.kt)("p",null,"This value balances two concerns. First, it is long enough that an election will have taken place since the request to unlock, so that those units of CELO will no longer have any impact on which validators are managing the network. This deters an attacker from manipulations in the form of borrowing funds to purchase CELO, then using it to elect malicious validators, since they will not be able to return the borrowed funds until after the attack, when presumably it would have been detected and the borrowed funds\u2019 value have fallen."),(0,r.kt)("p",null,"Second, the unlocking period is short enough that it does not represent a significant liquidity risk for most users. This limits the attractiveness to users of exchanges creating secondary markets in Locked CELO and thereby pooling voting power."),(0,r.kt)("h2",{id:"locking-and-voting-flow"},"Locking and Voting Flow"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://storage.googleapis.com/celo-website/docs/locked-gold-flow.jpg",alt:null})),(0,r.kt)("p",null,"The flow is as follows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"An account calls ",(0,r.kt)("inlineCode",{parentName:"p"},"lock"),", transferring an amount of CELO from their balance to the ",(0,r.kt)("inlineCode",{parentName:"p"},"LockedGold")," smart contract. This increments the account's 'non-voting' balance by the same amount.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Then the account calls ",(0,r.kt)("inlineCode",{parentName:"p"},"vote"),", passing in an amount and the address of the group to vote for. This decrements the account's 'non-voting' balance and increments the 'pending' balance associated with that group by the same amount. This counts immediately towards electing validators. Note that the vote may be rejected if it would mean that the account would be voting for more than 3 distinct groups, or that the ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/proof-of-stake/validator-elections#group-voting-caps"},"voting cap")," for the group would be exceeded.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"At the end of the current epoch, the protocol will first deliver ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/proof-of-stake/epoch-rewards"},"epoch rewards")," to validators, groups and voters based on the current epoch (pending votes do not count for these purposes), and then run an ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/proof-of-stake/validator-elections"},"election")," to select the active validator set for the following epoch.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The pending vote continues to contribute towards electing validators until it is changed, but the account must call ",(0,r.kt)("inlineCode",{parentName:"p"},"activate")," (in a subsequent epoch to the one in which the vote was made) to convert the pending vote to one that earns rewards.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"At the end of that epoch, if the group for which the vote was made had elected one or more validators in the prior election, then the activated vote is eligible for ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/proof-of-stake/epoch-rewards/locked-gold-rewards"},"Locked CELO rewards"),". These are applied to the pool of activated votes for the group. This means that activated voting Locked CELO automatically compounds, with the rewards increasing the account's votes for the same group, thereby increasing future rewards, benefitting participants who have elected to continuously participate in governance.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The account may subsequently choose to ",(0,r.kt)("inlineCode",{parentName:"p"},"unvote")," a specific amount of voting Locked CELO from a group, up to the total balance that the account has accrued there. Due to rewards, this Locked CELO amount may be higher than the original value passed to ",(0,r.kt)("inlineCode",{parentName:"p"},"vote"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"This Locked CELO immediately becomes non-voting, receives no further Epoch Rewards, and can be re-used to vote for a different group.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The account may choose to ",(0,r.kt)("inlineCode",{parentName:"p"},"unlock")," an amount of Locked CELO at any time, provided that it is inactive: this means it is non-voting in Validator Elections, the ",(0,r.kt)("inlineCode",{parentName:"p"},"deregistrationPeriod")," has elapsed if the amount has been used as a validator or validator group stake, and not active in any ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/governance"},"Governance proposals"),". Once an unlocking period of 3 days has passed, the account can call ",(0,r.kt)("inlineCode",{parentName:"p"},"withdraw")," to have the ",(0,r.kt)("inlineCode",{parentName:"p"},"LockedGold")," contract transfer them that amount."))),(0,r.kt)("p",null,"Votes persist between epochs, and the same vote is applied to each election unless and until it is changed. Vote withdrawal, vote changes, and additional CELO being used to vote have no effect on the validator set until the election finalizes at the end of the epoch."))}u.isMDXComponent=!0}}]);