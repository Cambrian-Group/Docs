"use strict";(self.webpackChunkcelo_docs=self.webpackChunkcelo_docs||[]).push([[8920],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return m}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var h=n.createContext({}),l=function(e){var t=n.useContext(h),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=l(e.components);return n.createElement(h.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,h=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(a),m=r,u=d["".concat(h,".").concat(m)]||d[m]||c[m]||o;return a?n.createElement(u,i(i({ref:t},p),{},{components:a})):n.createElement(u,i({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var s={};for(var h in t)hasOwnProperty.call(t,h)&&(s[h]=t[h]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=a[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},22218:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return h},metadata:function(){return l},assets:function(){return p},toc:function(){return c},default:function(){return m}});var n=a(83117),r=a(80102),o=(a(67294),a(3905)),i=["components"],s={title:"Using the Graph w/ Celo",description:"Learn about what the Graph is and how to use it in your Celo DApp",slug:"using-the-graph",authors:["josh"],tags:["The Graph","DApps"],image:"https://dl.airtable.com/.attachmentThumbnails/dd1b24f2e572bdf951dcc727ddf043ac/76b5253c",hide_table_of_contents:!1},h=void 0,l={permalink:"/blog/using-the-graph",source:"@site/blog/2021-11-18-using-the-graph/index.md",title:"Using the Graph w/ Celo",description:"Learn about what the Graph is and how to use it in your Celo DApp",date:"2021-11-18T00:00:00.000Z",formattedDate:"November 18, 2021",tags:[{label:"The Graph",permalink:"/blog/tags/the-graph"},{label:"DApps",permalink:"/blog/tags/d-apps"}],readingTime:4.496666666666667,truncated:!0,authors:[{name:"Josh Crites",title:"Developer Relations, cLabs",url:"https://github.com/critesjosh",imageURL:"https://github.com/critesjosh.png",key:"josh"}],prevItem:{title:"Verifying Contracts with Hardhat",permalink:"/blog/hardhat-deploy-verify"},nextItem:{title:"Demos with ObservableHQ",permalink:"/blog/observable-intro"}},p={authorsImageUrls:[void 0]},c=[{value:"What is the Graph?",id:"what-is-the-graph",children:[],level:2},{value:"Using the Graph",id:"using-the-graph",children:[{value:"Install the Graph CLI",id:"install-the-graph-cli",children:[],level:3},{value:"Initialize your Subgraph",id:"initialize-your-subgraph",children:[],level:3},{value:"Define the schema",id:"define-the-schema",children:[],level:3},{value:"Define Mappings",id:"define-mappings",children:[],level:3},{value:"Deploy Subgraph",id:"deploy-subgraph",children:[],level:3},{value:"Query the subgraph",id:"query-the-subgraph",children:[],level:3}],level:2}],d={toc:c};function m(e){var t=e.components,s=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://thegraph.com/"},"The Graph protocol")," makes it easy to get historical blockchain data. This can be useful when you want to check a users history of using a specific token or interacting with a specific contract. It may also be useful when collecting data about the activity around a specific contract, or set of contracts. The Graph also makes this data easy to transform, organize and share across applications."),(0,o.kt)("p",null,"In this post I explore"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/blog/using-the-graph#what-is-the-graph"},"What the Graph is")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/blog/using-the-graph#using-the-graph"},"How to get started using the Graph with Celo")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/blog/using-the-graph#initialize-your-subgraph"},"What a subgraph is and how to create one")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/blog/using-the-graph#deploy-subgraph"},"How to deploy a subgraph to the Graph's hosted service")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/blog/using-the-graph#query-the-subgraph"},"How to query a subgraph"))),(0,o.kt)("h2",{id:"what-is-the-graph"},"What is the Graph?"),(0,o.kt)("p",null,"From the Graph website:"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"The Graph is a decentralized protocol for indexing and querying data from blockchains, starting with Ethereum. It makes it possible to query data that is difficult to query directly.")),(0,o.kt)("p",null,"The problem that the Graph solves is that indexing blockchain data is actually very difficult. Additionally, the Graph makes it easy to get historical blockchain data without having to run your own archive node or paying to access an archive node through a node service provider, like ",(0,o.kt)("a",{parentName:"p",href:"https://www.quicknode.com/chains/celo"},"Quicknode"),"."),(0,o.kt)("h2",{id:"using-the-graph"},"Using the Graph"),(0,o.kt)("p",null,"I will be using ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/critesjosh/the-graph-hello-world"},"this GitHub repository")," as a reference throughout this post. This repo contains a simple ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/critesjosh/the-graph-hello-world/blob/master/HelloWorld.sol"},"HelloWorld contract")," that stores a string that can be updated. "),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"HelloWorld.sol")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// HelloWorld.sol\n\n// Learn more about Solidity here: https://solidity.readthedocs.io\npragma solidity >=0.5.0;\n\ncontract HelloWorld {\n  \n  event NameUpdated(string newName, address updater);\n  \n  // Define a string called name\n  string name;\n\n  // Declares a function called getName\n  // The 'public' label means the function can be called internally, by transactions or other contracts\n  // The 'view' label indicates that the function does not change the state of the contract\n  // The function returns a string, from the memory data location  \n  function getName() \n    public \n    view \n    returns (string memory) \n  {\n    // Return the storage variable 'name'\n    return name;\n  }\n\n  // Declare a function called setName\n  // The function takes 1 parameter, a string, called newName, with the calldata data location in the Ethereum Virtual Machine  \n  // The 'external' label means the function can only be called from an external source\n  function setName(string calldata newName) \n    external \n  {\n    emit NameUpdated(newName, msg.sender);\n    // Set the storage variable, name, to the value passed in as newName\n    name = newName;\n  }\n}\n")),(0,o.kt)("p",null,"The contract emits an event every time the storage sting is updated. Event handlers in the subgraph are triggered by contract events, so setting up a contract with events is required."),(0,o.kt)("p",null,"It is easiest to get started using the Graph hosted service, which supports queries on the Celo network."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You can ",(0,o.kt)("a",{parentName:"p",href:"https://thegraph.com/docs/hostedservice/what-is-hosted-service"},"learn more about the Graph's hosted service here"),"."))),(0,o.kt)("h3",{id:"install-the-graph-cli"},"Install the Graph CLI"),(0,o.kt)("p",null,"The first step is to install the graph command line tool."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install -g @graphprotocol/graph-cli\n")),(0,o.kt)("p",null,"or"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn global add @graphprotocol/graph-cli\n")),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Learn more about the ",(0,o.kt)("inlineCode",{parentName:"p"},"graph-cli")," package ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@graphprotocol/graph-cli"},"here"),"."))),(0,o.kt)("h3",{id:"initialize-your-subgraph"},"Initialize your Subgraph"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"A subgraph defines which data The Graph will index from Ethereum, and how it will store it. Once deployed, it will form a part of a global graph of blockchain data.")),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("a",{parentName:"p",href:"https://thegraph.com/docs/developer/define-subgraph-hosted"},"Read more about subgraphs on the Graph website.")))),(0,o.kt)("p",null,"In a new, empty project directory, run the following command in the terminal:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"graph init --product hosted-service --from-contract 0xd2dC7E59971E934bF479B8eA86B9Ec1627B0F3D6 --network celo-alfajores --abi <FILE> critesjosh/Hello-World\n")),(0,o.kt)("p",null,'The CLI tool will prompt you for some additional information. Use the "Hosted Service" for creating subgraphs that query contracts on the Celo network.'),(0,o.kt)("p",null,"For the subgraph name, enter your GitHub username followed by the name of your project. In my case this is ",(0,o.kt)("inlineCode",{parentName:"p"},"critesjosh/Hello-World"),"."),(0,o.kt)("p",null,"The tool will ask you to specify a directory, network and contract address that you would like to query. I chose the default directory (Hello-World), the ",(0,o.kt)("inlineCode",{parentName:"p"},"celo-alfajores")," network, the address of my deployed Solidity contract and the path to my ",(0,o.kt)("a",{parentName:"p",href:"https://docs.soliditylang.org/en/latest/abi-spec.html"},"contract ABI"),"."),(0,o.kt)("p",null,"The tool sets up my subgraph in the specified directory. Open ",(0,o.kt)("inlineCode",{parentName:"p"},"subgraph.yml")," in the new subgraph project folder to see how it is configured. You can find more information about the ",(0,o.kt)("a",{parentName:"p",href:"https://thegraph.com/docs/developer/create-subgraph-hosted#the-subgraph-manifest"},"Subgraph Manifest file here"),"."),(0,o.kt)("h3",{id:"define-the-schema"},"Define the schema"),(0,o.kt)("p",null,"The next step is to define your graphql schema in ",(0,o.kt)("inlineCode",{parentName:"p"},"schema.graphql")," in the new project directory."),(0,o.kt)("p",null,"A graphql schema is like a dictionary that defines the types of entities to map from the data and how the entities are related. This is an important step to spend some time thinking about because this will define how your data is structured and linked. Here is ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/sushiswap/sushiswap-subgraph"},"sushiswap's subgraph repo")," as a complex project reference."),(0,o.kt)("p",null,"For the simple HelloWorld contract that we are querying with this subgraph, I defined the schema like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"type Name @entity {\n  id: ID!\n  newName: String\n  updater: Bytes!\n}\n")),(0,o.kt)("p",null,"This will tell us the new name that is being stored in the contract, ",(0,o.kt)("inlineCode",{parentName:"p"},"newName"),", and the account address that updated the name, ",(0,o.kt)("inlineCode",{parentName:"p"},"udpater"),"."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("a",{parentName:"p",href:"https://thegraph.com/docs/developer/create-subgraph-hosted#the-graphql-schema"},"Read more about the Graph schemas here.")))),(0,o.kt)("h3",{id:"define-mappings"},"Define Mappings"),(0,o.kt)("p",null,"Mappings are defined in ",(0,o.kt)("inlineCode",{parentName:"p"},"./src/mappings.ts")," and transform the contract data (events) into the entities that are defined in ",(0,o.kt)("inlineCode",{parentName:"p"},"schema.graphql"),". These mappings are written in a subset of Typescript. "),(0,o.kt)("p",null,"In this example, there is only one event being indexed, so there is only one mapping."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { NameUpdated } from '../generated/HelloWorld/HelloWorld'\nimport { Name } from '../generated/schema'\n\nexport function handleNameUpdated(event: NameUpdated): void {\n  let id = event.transaction.hash.toHex()\n  let name = Name.load(id)\n  if (name == null) {\n    name = new Name(id)\n  }\n  name.newName = event.params.newName\n  name.updater = event.params.updater\n  name.save()\n}\n")),(0,o.kt)("p",null,"This mapping sets the entity ",(0,o.kt)("inlineCode",{parentName:"p"},"id")," as the transaction hash, the entity ",(0,o.kt)("inlineCode",{parentName:"p"},"newName")," as the newName from the event parameter and the entity ",(0,o.kt)("inlineCode",{parentName:"p"},"updater")," as the updater from the event parameter. The mapping will update an entity if one with a known ",(0,o.kt)("inlineCode",{parentName:"p"},"id")," already exists, but since transaction hashes are unique, each event emitted from the contract will create a new entity."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You can find more information about mappings on ",(0,o.kt)("a",{parentName:"p",href:"https://thegraph.com/docs/developer/create-subgraph-hosted#writing-mappings"},"the Graph website here"),"."))),(0,o.kt)("p",null,"Once the mapping is defined, you can generate the Graph AssemblyScript by running"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"graph codegen\n")),(0,o.kt)("p",null,'"This will generate an AssemblyScript class for every smart contract in the ABI files mentioned in subgraph.yaml, allowing you to bind these contracts to specific addresses in the mappings and call read-only contract methods against the block being processed. It will also generate a class for every contract event to provide easy access to event parameters as well as the block and transaction the event originated from."'),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"--",(0,o.kt)("a",{parentName:"em",href:"https://thegraph.com/docs/developer/create-subgraph-hosted#code-generation"},"The Graph codegen docs"))," "),(0,o.kt)("h3",{id:"deploy-subgraph"},"Deploy Subgraph"),(0,o.kt)("p",null,"To deploy the subgraph to the hosted service, you will need to create an account on ",(0,o.kt)("a",{parentName:"p",href:"https://thegraph.com/hosted-service"},"the Graph's hosted service site"),"."),(0,o.kt)("p",null,"From the ",(0,o.kt)("a",{parentName:"p",href:"https://thegraph.com/hosted-service/dashboard"},"dashboard"),", you can find your Access Token for deploying the subgraph. Once you have that, you can authenticate with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"graph auth --product hosted-service <ACCESS_TOKEN>\n")),(0,o.kt)("p",null,'Next, click the "Add Subgraph" button. Fill out the subgraph info with the appropriate information and deploy it with:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"graph deploy --product hosted-service <GITHUB_USER>/<SUBGRAPH NAME>\n")),(0,o.kt)("p",null,"Once your subgraph is deployed, you should be able to view it on the hosted service dashboard. You can view my ",(0,o.kt)("a",{parentName:"p",href:"https://thegraph.com/hosted-service/subgraph/critesjosh/hello-world"},"Hello World subgraph page here"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(88719).Z})),(0,o.kt)("p",null,"Once the subgraph is deployed, the service will take some time to sync the events from the contract. Once it has been fully synced, you can run queries in the playground to test it out."),(0,o.kt)("h3",{id:"query-the-subgraph"},"Query the subgraph"),(0,o.kt)("p",null,"You can learn more about ",(0,o.kt)("a",{parentName:"p",href:"https://thegraph.com/docs/hostedservice/query-hosted-service"},"querying your subgraph from the hosted service here"),"."),(0,o.kt)("p",null,"The following embedded code notebook from ",(0,o.kt)("a",{parentName:"p",href:"https://observablehq.com/"},"Observable HQ")," shows how to query the subgraph I deployed with basic Javascript. You can ",(0,o.kt)("a",{parentName:"p",href:"https://observablehq.com/@critesjosh/query-the-graph"},"view the notebook on Observable here"),". I wrote a post that goes into more detail about Observable, you can ",(0,o.kt)("a",{parentName:"p",href:"/blog/observable-intro"},"read it here"),"."),(0,o.kt)("p",null,"You can inspect the JavaScript objects in the notebook by clicking on them. Try clicking on the ",(0,o.kt)("inlineCode",{parentName:"p"},"result")," object. Click on the ",(0,o.kt)("inlineCode",{parentName:"p"},"names")," array in the ",(0,o.kt)("inlineCode",{parentName:"p"},"data")," object."),(0,o.kt)("iframe",{width:"100%",height:"500",frameborder:"0",class:"observable-notebook",src:"https://observablehq.com/embed/@critesjosh/query-the-graph?cell=*"}),(0,o.kt)("p",null,"You can see the entities that were defined in the ",(0,o.kt)("inlineCode",{parentName:"p"},"schema.graphql"),", populated with event information like the ",(0,o.kt)("inlineCode",{parentName:"p"},"newName")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"updater")," from each transaction!"))}m.isMDXComponent=!0},88719:function(e,t,a){t.Z=a.p+"assets/images/dashboard-13e8a350212ba76826f8237845f822d1.png"}}]);