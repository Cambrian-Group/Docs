"use strict";(self.webpackChunkcelo_docs=self.webpackChunkcelo_docs||[]).push([[9853],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return f}});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(n),f=o,h=u["".concat(s,".").concat(f)]||u[f]||p[f]||i;return n?a.createElement(h,r(r({ref:t},d),{},{components:n})):a.createElement(h,r({ref:t},d))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},17186:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var a=n(83117),o=n(80102),i=(n(67294),n(3905)),r=["components"],l={title:"Celo Full Node Incentives",description:"Overview of full node incentives available to node operators using gateway fees and transaction payments."},s="Full Node Incentives",c={unversionedId:"celo-codebase/protocol/transactions/full-node-incentives",id:"celo-codebase/protocol/transactions/full-node-incentives",title:"Celo Full Node Incentives",description:"Overview of full node incentives available to node operators using gateway fees and transaction payments.",source:"@site/docs/celo-codebase/protocol/transactions/full-node-incentives.md",sourceDirName:"celo-codebase/protocol/transactions",slug:"/celo-codebase/protocol/transactions/full-node-incentives",permalink:"/celo-codebase/protocol/transactions/full-node-incentives",editUrl:"https://github.com/celo-org/docs/edit/main/docs/celo-codebase/protocol/transactions/full-node-incentives.md",tags:[],version:"current",frontMatter:{title:"Celo Full Node Incentives",description:"Overview of full node incentives available to node operators using gateway fees and transaction payments."},sidebar:"docs",previous:{title:"Celo Encrypted Payment Comments",permalink:"/celo-codebase/protocol/transactions/tx-comment-encryption"},next:{title:"Celo Identity Overview",permalink:"/celo-codebase/protocol/identity"}},d=[{value:"Gateway fees",id:"gateway-fees",children:[],level:2},{value:"Optional Fields",id:"optional-fields",children:[],level:2},{value:"Transaction Payments",id:"transaction-payments",children:[],level:2},{value:"Minimum Gateway Fees",id:"minimum-gateway-fees",children:[],level:2}],p={toc:d};function u(e){var t=e.components,n=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"full-node-incentives"},"Full Node Incentives"),(0,i.kt)("p",null,"Overview of full node incentives available to node operators using gateway fees and transaction payments."),(0,i.kt)("hr",null),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Full node incentives are still very much in the early-research stage are ",(0,i.kt)("strong",{parentName:"p"},"not yet")," live on mainnet."))),(0,i.kt)("h2",{id:"gateway-fees"},"Gateway fees"),(0,i.kt)("p",null,"The Celo protocol will support ",(0,i.kt)("strong",{parentName:"p"},"gateway fees"),". These fees create an incentive for node operators to run a full node that is not a validator and act as a 'gateway', i.e. answer requests and forward transactions, on behalf of light clients. This is important since it is likely that the vast majority of nodes in the Celo network will be light or ultralight clients, and so the vast majority of full nodes will need to be deployed to service them rather than act as validators. In contrast, in Ethereum, there are few incentives to run a full node that is not mining and so few nodes serve light clients, resulting in a poor experience for mobile wallets."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://storage.googleapis.com/celo-website/docs/network-detail.png",alt:null})),(0,i.kt)("h2",{id:"optional-fields"},"Optional Fields"),(0,i.kt)("p",null,"A pair of optional fields in the transaction structure, the ",(0,i.kt)("inlineCode",{parentName:"p"},"GatewayFee")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"GatewayFeeRecipient"),", may be specified by light clients to identify the full node which is acting as their gateway to the Celo network. Light clients will set the ",(0,i.kt)("inlineCode",{parentName:"p"},"GatewayFeeRecipient")," to the Etherbase of the serving full node and the ",(0,i.kt)("inlineCode",{parentName:"p"},"GatewayFee")," field to a small amount of CELO, or ",(0,i.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/transactions/erc20-transaction-fees"},"alternative fee currency"),", which will be sent to the recipient at the point that the transaction is processed and included in a block. Note that the gateway fee is paid even if the transaction is reverted."),(0,i.kt)("h2",{id:"transaction-payments"},"Transaction Payments"),(0,i.kt)("p",null,"By attaching a payment to the transaction, the light client incentives the full node to serve its requests. Although many of the APIs that a light client will need to call, such as requesting block headers or chain state, do not provide any payment to the full node, refusing to serve non-transaction RPC calls will cause the light client to seek other full nodes to serve their transactions. Light clients may choose full node peers based on location, cost, reliability and other factors to optimize cost and quality of service."),(0,i.kt)("h2",{id:"minimum-gateway-fees"},"Minimum Gateway Fees"),(0,i.kt)("p",null,"When a minimum gateway fee is specified, full nodes refuse to process a transaction if the ",(0,i.kt)("inlineCode",{parentName:"p"},"GatewayFeeRecipient")," field is not set to the full node's Etherbase or the ",(0,i.kt)("inlineCode",{parentName:"p"},"GatewayFee")," value is not high enough. Full nodes set their Etherbase with the ",(0,i.kt)("inlineCode",{parentName:"p"},"--etherbase")," flag to indicate the address to which gateway fees should be sent and the ",(0,i.kt)("inlineCode",{parentName:"p"},"--light.gatewayfee")," flag to indicate the minimum fee value they will accept."))}u.isMDXComponent=!0}}]);