"use strict";(self.webpackChunkcelo_docs=self.webpackChunkcelo_docs||[]).push([[1113],{3905:function(e,t,o){o.d(t,{Zo:function(){return p},kt:function(){return u}});var n=o(67294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var c=n.createContext({}),l=function(e){var t=n.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=l(o),u=a,m=h["".concat(c,".").concat(u)]||h[u]||d[u]||r;return o?n.createElement(m,i(i({ref:t},p),{},{components:o})):n.createElement(m,i({ref:t},p))}));function u(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<r;l++)i[l]=o[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}h.displayName="MDXCreateElement"},94671:function(e,t,o){o.r(t),o.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return p},default:function(){return h}});var n=o(83117),a=o(80102),r=(o(67294),o(3905)),i=["components"],s={title:"Celo Identity Overview",description:"How Celo maps wallet addresses to phone numbers to make financial tools more accessible to mobile phone users.",slug:"/celo-codebase/protocol/identity"},c="Identity Overview",l={unversionedId:"celo-codebase/protocol/identity/index",id:"celo-codebase/protocol/identity/index",title:"Celo Identity Overview",description:"How Celo maps wallet addresses to phone numbers to make financial tools more accessible to mobile phone users.",source:"@site/docs/celo-codebase/protocol/identity/index.md",sourceDirName:"celo-codebase/protocol/identity",slug:"/celo-codebase/protocol/identity",permalink:"/celo-codebase/protocol/identity",editUrl:"https://github.com/celo-org/docs/edit/main/docs/celo-codebase/protocol/identity/index.md",tags:[],version:"current",frontMatter:{title:"Celo Identity Overview",description:"How Celo maps wallet addresses to phone numbers to make financial tools more accessible to mobile phone users.",slug:"/celo-codebase/protocol/identity"},sidebar:"docs",previous:{title:"Celo Full Node Incentives",permalink:"/celo-codebase/protocol/transactions/full-node-incentives"},next:{title:"Valora Accounts",permalink:"/celo-codebase/protocol/identity/valora-accounts"}},p=[{value:"Introduction to Identity on Celo",id:"introduction-to-identity-on-celo",children:[{value:"Adding their phone number to the mapping",id:"adding-their-phone-number-to-the-mapping",children:[],level:3},{value:"Using the mapping for payment",id:"using-the-mapping-for-payment",children:[],level:3},{value:"Preventing harvesting of phone numbers",id:"preventing-harvesting-of-phone-numbers",children:[],level:3},{value:"Attestation service",id:"attestation-service",children:[],level:3},{value:"Future improvements to privacy",id:"future-improvements-to-privacy",children:[],level:3}],level:2}],d={toc:p};function h(e){var t=e.components,o=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"identity-overview"},"Identity Overview"),(0,r.kt)("p",null,"How Celo maps wallet addresses to phone numbers to make financial tools more accessible to mobile phone users."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"introduction-to-identity-on-celo"},"Introduction to Identity on Celo"),(0,r.kt)("p",null,"Celo\u2019s unique purpose is to make financial tools accessible to anyone with a mobile phone. One barrier for the usage of many other platforms is their required usage of 30+ hexadecimal-character-long strings as addresses. It\u2019s like bank account numbers, but worse. Hard to remember, easy to mess up. They are so hard to use that the predominant way of exchanging addresses is usually via copy-paste over an existing messaging channel or via QR-codes in person. Both approaches are practically interactive protocols and thus do not cover many use cases in which people would like to transact. Celo offers an optional lightweight identity layer that starts with a decentralized mapping of phone numbers to wallet addresses, allowing users to transact with one another via the most common identity scheme everyone is familiar with: their address book."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://storage.googleapis.com/celo-website/docs/attestations-flow.jpg",alt:null})),(0,r.kt)("h3",{id:"adding-their-phone-number-to-the-mapping"},"Adding their phone number to the mapping"),(0,r.kt)("p",null,"To allow Bob to find an address mapped to her phone number, Alice can request attestations to their phone number ","(","technically the hash of their phone number",")"," from the ",(0,r.kt)("inlineCode",{parentName:"p"},"Attestations")," contract by transferring the attestation request fee to it. The fee per attestation request is set on the contract with ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/governance"},"Governance"),". After a brief waiting time of currently ",(0,r.kt)("inlineCode",{parentName:"p"},"4")," blocks, the ",(0,r.kt)("inlineCode",{parentName:"p"},"Attestations")," contract will use the ",(0,r.kt)("inlineCode",{parentName:"p"},"Random")," contract to do a random selection over the current validator set in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Validators")," contract who will become responsible for these attestation requests."),(0,r.kt)("p",null,"As part of the expectation to validators, they run the attestation service whose endpoint they register in their ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/identity/metadata"},"Metadata"),". Alice can identify the validators responsible for her attestation from the smart contract, determine the validators' attestation service URLs from their ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/identity/metadata"},"Metadata")," and request attestations from them. In turn, the attestation service produces a signed secret message that acts as an attestation by that validator that Alice owns the phone number. The validator sends that message via SMS. Read more under ",(0,r.kt)("a",{parentName:"p",href:"#attestation-service"},"attestation service"),"."),(0,r.kt)("p",null,"When Alice receives the text message, she can take that signed message to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Attestations")," contract, which can verify that the attestation came from the validator indeed. Upon a successful attestation, the validator can redeem for the attestation request fee to pay them for the cost of sending the SMS. In the end, we have recorded an attestation by the validator to a mapping of Alice\u2019s phone number to her account address."),(0,r.kt)("h3",{id:"using-the-mapping-for-payment"},"Using the mapping for payment"),(0,r.kt)("p",null,"Once Alice has completed attestations for their phone number/address, Bob, who has her phone number in his contact book, can see that Alice has an attested account address with her phone number. He can use that address to send funds to Alice, without her having to specifically communicate her address to Bob."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Attestations")," contract records all attestations of a phone number to any number of addresses. That for example could happen when a user loses their private key and wants to map a new wallet address. However, it could also happen through the collusion of a validator with Alice. Therefore, it is important that clients of the identity protocol highlight possible conflicting attestations."),(0,r.kt)("p",null,'Some risk exists for attestations to be added without the permission of the "legitimate" owner of the phone number. One such risk is that the phone service provider or ',(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/SIM_swap_scam"},"SIM swap")," attacker could take control of the phone number and complete a number of attestations. Another risk is that a sufficient number of Attestation Service providers may collude to complete fake attestations. Notably, completing malicious attestations does not lead to a loss of funds, as the private key is still the necessary and sufficient condition for transactions of an account. However, without proper care, future senders may be tricked into sending funds to the newly associated address. In general the number and age of attestations for an address should be taken into account to identify the valid owner of a phone number."),(0,r.kt)("p",null,"There are additional measures we can take to further secure the integrity of the mapping\u2019s usage. In the future we plan to provide reference implementations in the wallet for some of these. For example, we plan to detect remapping of wallet addresses. Many users are already accustomed to sending small amounts first and verifying the receipt of those funds before attempting to transfer larger amounts."),(0,r.kt)("h3",{id:"preventing-harvesting-of-phone-numbers"},"Preventing harvesting of phone numbers"),(0,r.kt)("p",null,"To protect user privacy by preventing mass harvesting of phone numbers, the Celo platform includes a service that obfuscates the information saved on the blockchain. The service is enabled by default for all Celo Wallet users. Details of its functionality and architecture are explained in ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/identity/phone-number-privacy"},"Phone Number Privacy")),(0,r.kt)("h3",{id:"attestation-service"},"Attestation service"),(0,r.kt)("p",null,"The attestation service is a simple Node.js service that validators run to send signed messages for attestations. It can be configured with SMS providers, as different providers have different characteristics like reliability, trustworthiness and performance in different regions. The attestation service currently supports ",(0,r.kt)("a",{parentName:"p",href:"https://www.twilio.com"},"Twilio")," and ",(0,r.kt)("a",{parentName:"p",href:"https://nexmo.com"},"Nexmo"),". Celo should widen the number of supported providers over time."),(0,r.kt)("p",null,"We have been experimenting with a SMS provider that we would like community feedback on. Instead of sending the SMS via conventional providers like Twilio, users of a ",(0,r.kt)("inlineCode",{parentName:"p"},"Rewards Mobile App")," could register themselves with a ",(0,r.kt)("inlineCode",{parentName:"p"},"Verification Pool")," and be made responsible for sending those text messages. It would allow users with cheap or leftover SMS capacity from their cell phone plan to effectively acquire a share of the attestation request fees. It would represent a unique on-ramp for users who do not have access to classic on-ramps like exchanges. Validators could configure their attestation service to use such a SMS provider which could in theory provide better inclusion and performance."),(0,r.kt)("h3",{id:"future-improvements-to-privacy"},"Future improvements to privacy"),(0,r.kt)("p",null,"Celo is committed to meet the privacy needs of its users. More details about areas for future research can be found in ",(0,r.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/identity/privacy-research"},"Privacy Research")))}h.isMDXComponent=!0}}]);