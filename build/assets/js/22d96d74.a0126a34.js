"use strict";(self.webpackChunkcelo_docs=self.webpackChunkcelo_docs||[]).push([[2245],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=a,g=d["".concat(c,".").concat(m)]||d[m]||u[m]||i;return n?r.createElement(g,o(o({ref:t},p),{},{components:n})):r.createElement(g,o({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},23550:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return p},default:function(){return d}});var r=n(83117),a=n(80102),i=(n(67294),n(3905)),o=["components"],s={title:"Celo Gas Pricing",description:"Introduction to gas prices, calculations, transactions, and fees on the Celo network."},c="Gas Pricing",l={unversionedId:"celo-codebase/protocol/transactions/gas-pricing",id:"celo-codebase/protocol/transactions/gas-pricing",title:"Celo Gas Pricing",description:"Introduction to gas prices, calculations, transactions, and fees on the Celo network.",source:"@site/docs/celo-codebase/protocol/transactions/gas-pricing.md",sourceDirName:"celo-codebase/protocol/transactions",slug:"/celo-codebase/protocol/transactions/gas-pricing",permalink:"/celo-codebase/protocol/transactions/gas-pricing",editUrl:"https://github.com/celo-org/docs/edit/main/docs/celo-codebase/protocol/transactions/gas-pricing.md",tags:[],version:"current",frontMatter:{title:"Celo Gas Pricing",description:"Introduction to gas prices, calculations, transactions, and fees on the Celo network."},sidebar:"docs",previous:{title:"Paying for Gas in Tokens",permalink:"/celo-codebase/protocol/transactions/erc20-transaction-fees"},next:{title:"Celo's Escrow Contract",permalink:"/celo-codebase/protocol/transactions/escrow"}},p=[{value:"Gas Price Minimum",id:"gas-price-minimum",children:[],level:2},{value:"Calculating Gas Price",id:"calculating-gas-price",children:[],level:2},{value:"Selecting a Transaction Gas Price",id:"selecting-a-transaction-gas-price",children:[],level:2},{value:"Transaction Fee Recipients",id:"transaction-fee-recipients",children:[],level:2}],u={toc:p};function d(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"gas-pricing"},"Gas Pricing"),(0,i.kt)("p",null,"Introduction to gas prices, calculations, transactions, and fees on the Celo network. "),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"gas-price-minimum"},"Gas Price Minimum"),(0,i.kt)("p",null,"Celo uses a gas market based on ",(0,i.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-1559"},"EIP-1559"),". The protocol establishes a ",(0,i.kt)("strong",{parentName:"p"},"gas price minimum")," that applies to all transactions regardless of which validator processes them."),(0,i.kt)("p",null,"The gas price minimum will respond to demand, increasing during periods of sustained demand, but allowing temporary spikes in gas demand without price shocks. The Celo protocol aims to have blocks filled at the ",(0,i.kt)("inlineCode",{parentName:"p"},"target_density"),", a certain proportion of the total block gas limit. When blocks are being filled more than the target, the gas price minimum will be raised until demand subsides. If blocks are being filled at less than the target rate, the gas price minimum will decrease until demand rises. The rate of change is determined by a governable parameter, ",(0,i.kt)("inlineCode",{parentName:"p"},"adjustment_speed"),"."),(0,i.kt)("h2",{id:"calculating-gas-price"},"Calculating Gas Price"),(0,i.kt)("p",null,"In the Celo protocol, the gas price minimum for the next block is calculated based on the current block:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"gas_price_minimum' = gas_price_minimum * (1 + ((total_gas_used / block_gas_limit) \u2212 target_density) * adjustment_speed) + 1\n")),(0,i.kt)("p",null,"Every transaction is required to pay for gas at or above the gas price minimum in order to be processed. Full nodes will reject transactions whose gas price is below the current gas price minimum, and will discard outstanding transactions if the gas price minimum subsequently falls below the gas price that the transactions specify."),(0,i.kt)("h2",{id:"selecting-a-transaction-gas-price"},"Selecting a Transaction Gas Price"),(0,i.kt)("p",null,"This approach provides a simple mechanism for clients to determine what gas price they should pay. A ",(0,i.kt)("inlineCode",{parentName:"p"},"GasPriceMinimum")," smart contract provides access to the current gas price minimum. For example, with the parameters specified for the Celo testnets, a gas price of 3x the current gas price minimum will be valid in all scenarios for the following 30 seconds."),(0,i.kt)("p",null,"When the client wants to ensure that their transaction is processed quickly, they may wish to further increase the gas price to encourage validators proposing new blocks to include it in preference to other transactions."),(0,i.kt)("h2",{id:"transaction-fee-recipients"},"Transaction Fee Recipients"),(0,i.kt)("p",null,"The required portion of gas fee, known as the ",(0,i.kt)("strong",{parentName:"p"},"base"),", is set as ",(0,i.kt)("inlineCode",{parentName:"p"},"base = gas_price_minimum * gas_used")," and is sent to the ",(0,i.kt)("a",{parentName:"p",href:"/celo-codebase/protocol/proof-of-stake/epoch-rewards/community-fund"},"Community Fund"),". The rest of the gas fee, known as the ",(0,i.kt)("strong",{parentName:"p"},"tip"),", is rewarded to the validator that proposes the block. Block producers only receive the tip and not the base of the gas fee, which means that they do not have an incentive to artificially inflate the gas price minimum by flooding the network with transactions."))}d.isMDXComponent=!0}}]);