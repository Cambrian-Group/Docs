<!doctype html>
<html class="docs-version-current" lang="es" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/es/blog/rss.xml" title="LMAX Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/es/blog/atom.xml" title="LMAX Docs Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="LMAX Docs" href="/es/opensearch.xml">
<script defer="defer" src="https://cdn.usefathom.com/script.js" spa="auto" site="AZMFWALB"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.6.0/web3.min.js" async></script><title data-react-helmet="true">Upgrade a Celo Node | LMAX Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.lmax.pro/es/validator-guide/node-upgrades"><meta data-react-helmet="true" name="docsearch:language" content="es"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Upgrade a Celo Node | LMAX Docs"><meta data-react-helmet="true" name="description" content="How to upgrade to the newest available version of a Celo node."><meta data-react-helmet="true" property="og:description" content="How to upgrade to the newest available version of a Celo node."><link data-react-helmet="true" rel="icon" href="/es/img/color-favicon.png"><link data-react-helmet="true" rel="canonical" href="https://docs.lmax.pro/es/validator-guide/node-upgrades"><link data-react-helmet="true" rel="alternate" href="https://docs.lmax.pro/validator-guide/node-upgrades" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.lmax.pro/es/validator-guide/node-upgrades" hreflang="es"><link data-react-helmet="true" rel="alternate" href="https://docs.lmax.pro/validator-guide/node-upgrades" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://55M4I38S60-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/es/assets/css/styles.2cd87a80.css">
<link rel="preload" href="/es/assets/js/runtime~main.1723cf43.js" as="script">
<link rel="preload" href="/es/assets/js/main.b67d1e59.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Saltar al contenido principal</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/es/"><div class="navbar__logo"><img src="/es/img/color-logo.png" alt="LMAX Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/es/img/color-logo.png" alt="LMAX Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">LMAX Docs</b></a><a class="navbar__item navbar__link" href="/es/validator-guide/overview">Legal</a><a class="navbar__item navbar__link" href="/es/community/contributing">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://www.lmax.com/blog/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>EspaÃ±ol</span></span></a><ul class="dropdown__menu"><li><a href="/validator-guide/node-upgrades" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/es/validator-guide/node-upgrades" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">EspaÃ±ol</a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleChecked_a04y toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" checked="" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Buscar"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Buscar</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Volver al principio" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">En esta pÃ¡gina</button></div><div class="theme-doc-markdown markdown"><header><h1>Upgrade a Node</h1></header><p>How to upgrade to the newest available version of a Celo node.</p><hr><h2 class="anchor anchorWithStickyNavbar_y2LR" id="recent-releases">Recent Releases<a class="hash-link" href="#recent-releases" title="Enlace directo al encabezado">â€‹</a></h2><ul><li><a href="https://github.com/celo-org/celo-blockchain/releases" target="_blank" rel="noopener noreferrer">You can view the latest releases here.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="when-an-upgrade-is-required">When an upgrade is required<a class="hash-link" href="#when-an-upgrade-is-required" title="Enlace directo al encabezado">â€‹</a></h2><p>Upgrades to the Celo node software will often be optional improvements, such as improvements to performance, new useful features, and non-critical bug fixes.</p><p>Occasionally, they may be required when the upgrade is necessary to continue operating on the network, such as hard forks, or critical bug fixes. Required upgrades are enforced by setting the via a minimum client version number stored on-chain, which may be updated via <a href="/es/celo-codebase/protocol/governance">Governance</a> after the client is made available.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="upgrading-a-non-validating-node">Upgrading a non-validating node<a class="hash-link" href="#upgrading-a-non-validating-node" title="Enlace directo al encabezado">â€‹</a></h2><p>Use these instructions to update non-validating nodes, such as your account node or your attestation node on the Baklava testnet. Also use these instructions to upgrade your proxy node, but remember not to stop the proxy of a running validator.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pull-the-latest-docker-image">Pull the latest Docker image<a class="hash-link" href="#pull-the-latest-docker-image" title="Enlace directo al encabezado">â€‹</a></h3><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">CELO_IMAGE</span><span class="token operator">=</span><span class="token plain">us.gcr.io/celo-org/geth:mainnet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker pull </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CELO_IMAGE</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo al portapapeles" class="copyButton_M3SB clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="stop-and-remove-the-existing-node">Stop and remove the existing node<a class="hash-link" href="#stop-and-remove-the-existing-node" title="Enlace directo al encabezado">â€‹</a></h3><p>Stop and remove the existing node. Make sure to stop the node gracefully (i.e. giving it time to shut down and complete any writes to disk) or your chain data may become corrupted.</p><p>Note: The <code>docker run</code> commands in the documentation have been updated to now include <code>--stop-timeout 300</code>, which should make the <code>-t 300</code> in <code>docker stop</code> below redundant. However, it is still recommended to include it just in case.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker stop -t </span><span class="token number">300</span><span class="token plain"> celo-fullnode</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker </span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> celo-fullnode</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo al portapapeles" class="copyButton_M3SB clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="start-the-new-node">Start the new node<a class="hash-link" href="#start-the-new-node" title="Enlace directo al encabezado">â€‹</a></h3><p>Start the new node using <code>docker run</code> as detailed in the appropriate section of the getting started guide. Remember to recover any environment variables, if using a new terminal, before running the documented commands.</p><ul><li><a href="/es/getting-started/mainnet/running-a-full-node-in-mainnet#start-the-node">Full node</a></li><li><a href="/es/getting-started/mainnet/running-a-validator-in-mainnet#start-your-accounts-node">Accounts node</a></li><li><a href="/es/getting-started/mainnet/running-a-validator-in-mainnet#running-the-attestation-service">Attestion node</a></li><li><a href="/es/getting-started/mainnet/running-a-validator-in-mainnet#deploy-a-proxy">Proxy node</a></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="upgrading-a-validating-node">Upgrading a Validating Node<a class="hash-link" href="#upgrading-a-validating-node" title="Enlace directo al encabezado">â€‹</a></h2><p>Upgrading a validating node is much the same, but requires extra care to be taken to prevent validator downtime.</p><p>One option to complete a validating node upgrade is to perform a key rotation onto a new node. Pull the latest Docker image, as mentioned above, then execute a Validator signing key rotation, using the latest image as the new Validator signing node. A recommended procedure for key rotation is documented in the <a href="/es/validator-guide/summary/key-rotation">Key Management</a> guide.</p><p>A second option is to perform a hot-swap to switch over to a new validator node. The new validator node <strong>must</strong> be configured with the same set of proxies as the existing validator node.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="hotswapping-validator-nodes">Hotswapping Validator Nodes<a class="hash-link" href="#hotswapping-validator-nodes" title="Enlace directo al encabezado">â€‹</a></h3><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Hotswap is being introduced in version 1.2.0. When upgrading nodes that are not yet on 1.2.0 refer to the guide to perform a key rotation.</p></div></div><p>Validators can be configured as primaries or replicas. By default validators start as primaries and will persist all changes around starting or stopping. Through the istanbul management RPC API the validator can be configured to start or stop at a specified block. The validator will participate in consensus for block numbers in the range <code>[start, stop)</code>.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>Note that the replica node <strong>must</strong> use the same set of proxies as the primary node. If it does not it will not be able to switchover without downtime due to needing to the complete the announce protocol from scratch. Replicas behind the same set of proxies as the primary node will be able to switchover without downtime.</p></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="rpc-methods">RPC Methods<a class="hash-link" href="#rpc-methods" title="Enlace directo al encabezado">â€‹</a></h4><ul><li><code>istanbul.start()</code> and <code>istanbul.startAtBlock()</code> start validating immediately or at a block</li><li><code>istanbul.stop()</code> and <code>istanbul.stopAtBlock()</code> stop validating immediately or at a block</li><li><code>istanbul.replicaState</code> will give you the state of the node and the start/stop blocks</li><li><code>istanbul.validating</code> will give you true/false if the node is validating</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p><code>startAtBlock</code> and <code>stopAtBlock</code> must be given a block in the future.</p></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="geth-flags">Geth Flags<a class="hash-link" href="#geth-flags" title="Enlace directo al encabezado">â€‹</a></h4><ul><li><code>--istanbul.replica</code> flag which starts a validator in replica mode.</li></ul><p>On startup, nodes will look to see if there is a <code>replicastate</code> folder inside it&#x27;s data directory. If that folder exists the node will configure itself as a validator or replica depending on the previous stored state. The stored state will take precedence over the command line flags. If the folder does not exists the node will stored it&#x27;s state as configured by the command line. When RPC calls are made to start or stop validating, those changes will be persisted to the <code>replicastate</code> folder.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>If reconfiguring a node to be a replica or reusing a data directory, make sure that the node was previously configured as replica or that the <code>replicastate</code> folder is removed. If there is an existing <code>replicastate</code> folder from a node that was not configured as a replica the node will attempt to start validating.</p></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="steps-to-upgrade">Steps to upgrade<a class="hash-link" href="#steps-to-upgrade" title="Enlace directo al encabezado">â€‹</a></h4><ol><li>Pull the latest docker image.</li><li>Start a new validator node on a second host in replica mode (<code>--istanbul.replica</code> flag). It should be otherwise configured exactly the same as the existing validator.<ul><li>It needs to connect to the exisiting proxies and the validator signing key to connect to other validators in listen mode.</li><li>If reconfiguring a node to be a replica or reusing a data directory, make sure that the node was previously configured as replica or that the <code>replicastate</code> folder is removed.</li></ul></li><li>Once the replica is synced and has validator enode urls for all validators, it is ready to swapped in.<ul><li>Check validator enode urls with <code>istanbul.valEnodeTableInfo</code> in the geth console. The field <code>enode</code> should be filled in for each validator peer.</li></ul></li><li>In the geth console on the primary run <code>istanbul.stopAtBlock(xxxx)</code><ul><li>Make sure to select a block number comfortably in the future.</li><li>You can check what the stop block is with <code>istanbul.replicaState</code> in the geth console.</li><li>You can run <code>istanbul.start()</code> to clear the stop block</li></ul></li><li>In the geth console of the replica run <code>istanbul.startAtBlock(xxxx)</code><ul><li>You can check what the start block is with <code>istanbul.replicaState</code> in the geth console.</li><li>You can run <code>istanbul.stop()</code> to clear the start block</li></ul></li><li>Confirm that the transition occurred with <code>istanbul.replicaState</code><ul><li>The last block that the old primary will sign is block number <code>xxxx - 1</code></li><li>The first block that the new primary will sign is block number <code>xxxx</code></li></ul></li><li>Tear down the old primary once the transition has occurred.</li></ol><p>Example geth console on the old primary.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&gt;</span><span class="token plain"> istanbul.replicaState</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  isPrimary: true,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  startValidatingBlock: null,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  state: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Primary&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  stopValidatingBlock: null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> istanbul.stopAtBlock</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">21000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> istanbul.replicaState</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  isPrimary: true,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  startValidatingBlock: null,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  state: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Primary in given range&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  stopValidatingBlock: </span><span class="token number">21000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> istanbul.replicaState</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  isPrimary: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  startValidatingBlock: null,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  state: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Replica&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  stopValidatingBlock: null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo al portapapeles" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>Example geth console on the replica being promoted to primary. Not shown is confirming the node is synced and connected to validator peers.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&gt;</span><span class="token plain"> istanbul.replicaState</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  isPrimary: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  startValidatingBlock: null,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  state: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Replica&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  stopValidatingBlock: null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> istanbul.startAtBlock</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">21000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> istanbul.replicaState</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  isPrimary: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  startValidatingBlock: </span><span class="token number">21000</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  state: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Replica waiting to start&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  stopValidatingBlock: null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> istanbul.replicaState</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  isPrimary: true,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  startValidatingBlock: null,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  state: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Primary&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  stopValidatingBlock: null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo al portapapeles" class="copyButton_M3SB clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="upgrading-proxy-nodes">Upgrading Proxy Nodes<a class="hash-link" href="#upgrading-proxy-nodes" title="Enlace directo al encabezado">â€‹</a></h3><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>Release 1.2.0 is backwards incompatible in the Validator and Proxy connection. Validators and proxies must be upgraded to 1.2.0 at the same time.</p></div></div><p>With multi-proxy, you can upgrade proxies one by one or can add newly synced proxies with the latest Docker image and can remove the old proxies. If upgrading the proxies in place, a rolling upgrade is recommended as the validator will re-assign direct connections as proxies are added and removed. These re-assignments will allow the validator to continue to participate in consensus.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="NavegaciÃ³n de pÃ¡ginas de documentos"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#recent-releases" class="table-of-contents__link toc-highlight">Recent Releases</a></li><li><a href="#when-an-upgrade-is-required" class="table-of-contents__link toc-highlight">When an upgrade is required</a></li><li><a href="#upgrading-a-non-validating-node" class="table-of-contents__link toc-highlight">Upgrading a non-validating node</a><ul><li><a href="#pull-the-latest-docker-image" class="table-of-contents__link toc-highlight">Pull the latest Docker image</a></li><li><a href="#stop-and-remove-the-existing-node" class="table-of-contents__link toc-highlight">Stop and remove the existing node</a></li><li><a href="#start-the-new-node" class="table-of-contents__link toc-highlight">Start the new node</a></li></ul></li><li><a href="#upgrading-a-validating-node" class="table-of-contents__link toc-highlight">Upgrading a Validating Node</a><ul><li><a href="#hotswapping-validator-nodes" class="table-of-contents__link toc-highlight">Hotswapping Validator Nodes</a></li><li><a href="#upgrading-proxy-nodes" class="table-of-contents__link toc-highlight">Upgrading Proxy Nodes</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About LMAX</div><ul class="footer__items"><li class="footer__item"><a href="https://www.lmax.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LMAX Group</a></li><li class="footer__item"><a href="https://www.lmax.com/exchange" target="_blank" rel="noopener noreferrer" class="footer__link-item">LMAX Exchange </a></li><li class="footer__item"><a href="https://www.lmaxdigital.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LMAX Digital<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/es/community/contributing">Contributors</a></li><li class="footer__item"><a href="https://www.youtube.com/@LMAXGroup" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Youtobe<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/EhCjWb9A" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/LmaxAsset" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/joinchat/F8Tdpoi_71E2NTFl" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/dmcsingular" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Ecosystem</div><ul class="footer__items"><li class="footer__item"><a href="https://lmax.pro/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LMAX Global<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.ethereum.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Ethereum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.binance.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Binance Chain<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://polygon.technology/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Polygon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 LMAX Group, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/es/assets/js/runtime~main.1723cf43.js"></script>
<script src="/es/assets/js/main.b67d1e59.js"></script>
</body>
</html>