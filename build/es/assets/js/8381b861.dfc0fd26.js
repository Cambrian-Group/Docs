"use strict";(self.webpackChunkcelo_docs=self.webpackChunkcelo_docs||[]).push([[7984],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return h}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=c(n),h=a,g=u["".concat(s,".").concat(h)]||u[h]||p[h]||r;return n?o.createElement(g,l(l({ref:t},d),{},{components:n})):o.createElement(g,l({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var c=2;c<r;c++)l[c]=n[c];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},53557:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var o=n(83117),a=n(80102),r=(n(67294),n(3905)),l=["components"],i={title:"Connect Ledger to Celo CLI",description:"How to connect a ledger wallet to the Celo CLI."},s="Connect Ledger to Celo CLI",c={unversionedId:"celo-holder-guide/connecting-ledger-celocli",id:"celo-holder-guide/connecting-ledger-celocli",title:"Connect Ledger to Celo CLI",description:"How to connect a ledger wallet to the Celo CLI.",source:"@site/docs/celo-holder-guide/connecting-ledger-celocli.md",sourceDirName:"celo-holder-guide",slug:"/celo-holder-guide/connecting-ledger-celocli",permalink:"/es/celo-holder-guide/connecting-ledger-celocli",editUrl:"https://celo.crowdin.com/celo-docs/es",tags:[],version:"current",frontMatter:{title:"Connect Ledger to Celo CLI",description:"How to connect a ledger wallet to the Celo CLI."}},d=[{value:"Install the Celo CLI",id:"install-the-celo-cli",children:[{value:"Configure for Celo Mainnet",id:"configure-for-celo-mainnet",children:[],level:4},{value:"Configure for Celo Alfajores Testnet.",id:"configure-for-celo-alfajores-testnet",children:[],level:4},{value:"Check that the node is synchronized to Celo CLI:",id:"check-that-the-node-is-synchronized-to-celo-cli",children:[],level:4}],level:3},{value:"Confirm Addresses on Celo CLI",id:"confirm-addresses-on-celo-cli",children:[],level:3},{value:"Performing a Testnet transaction on Celo CLI",id:"performing-a-testnet-transaction-on-celo-cli",children:[],level:3},{value:"Using <code>celocli</code>",id:"using-celocli",children:[],level:3},{value:"View Account Balance",id:"view-account-balance",children:[],level:2},{value:"Receive Crypto Assets",id:"receive-crypto-assets",children:[],level:2},{value:"Send Crypto Assets",id:"send-crypto-assets",children:[],level:2},{value:"Troubleshooting",id:"troubleshooting",children:[],level:2}],p={toc:d};function u(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"connect-ledger-to-celo-cli"},"Connect Ledger to Celo CLI"),(0,r.kt)("p",null,"How to connect a ledger wallet to the Celo CLI."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"install-the-celo-cli"},"Install the Celo CLI"),(0,r.kt)("p",null,"Open the terminal application on your computer and instal"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install -g @celo/celocli\n")),(0,r.kt)("p",null,"If you have previously installed the CLI, ensure that you are using version 0.0.47 or later:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"celocli --version\n")),(0,r.kt)("p",null,"And if not, upgrade by running the same command as above."),(0,r.kt)("p",null,"You will now need to point the Celo CLI to a node that is synchronized with one of Celo\u2019s networks."),(0,r.kt)("h4",{id:"configure-for-celo-mainnet"},(0,r.kt)("a",{parentName:"h4",href:"https://docs.celo.org/getting-started/mainnet"},"Configure for Celo Mainnet")),(0,r.kt)("p",null,"Configure the Celo CLI so that it uses a cLabs node on the Alfajores network."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"celocli config:set --node https://forno.celo.org/\n")),(0,r.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Connecting celocli to an untrusted node may allow that node to influence the transactions sent by the Celo CLI to the Ledger for signing. When in doubt, always use a node that you trust or are running yourself."))),(0,r.kt)("h4",{id:"configure-for-celo-alfajores-testnet"},(0,r.kt)("a",{parentName:"h4",href:"https://docs.celo.org/getting-started/alfajores-testnet"},"Configure for Celo Alfajores Testnet"),"."),(0,r.kt)("p",null,"Configure the Celo CLI so that it uses a cLabs node on the Alfajores network."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"celocli config:set --node https://alfajores-forno.celo-testnet.org/\n")),(0,r.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Connecting celocli to an untrusted node may allow that node to influence the transactions sent by the Celo CLI to the Ledger for signing. When in doubt, always use a node that you trust or are running yourself."))),(0,r.kt)("h4",{id:"check-that-the-node-is-synchronized-to-celo-cli"},"Check that the node is synchronized to Celo CLI:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"celocli node:synced\n")),(0,r.kt)("p",null,"The output should display ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),". If it displays ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," you may need to wait a bit and try again."),(0,r.kt)("h3",{id:"confirm-addresses-on-celo-cli"},"Confirm Addresses on Celo CLI"),(0,r.kt)("p",null,"The Ledger's current seed phrase determines the device's accounts. In the terminal on your computer, you can view the first account's address with the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"celocli account:list --useLedger --ledgerAddresses 1\n")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If you wish to generate more than one address from your seed phrase, you can display the first ",(0,r.kt)("inlineCode",{parentName:"p"},"N")," (e.g. 10) addresses use the ",(0,r.kt)("inlineCode",{parentName:"p"},"--ledgerAddresses")," flag."),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"celocli account:list --useLedger --ledgerAddresses N\n")),(0,r.kt)("p",{parentName:"div"},"To display addresses at specific indexes ",(0,r.kt)("inlineCode",{parentName:"p"},"M"),"and ",(0,r.kt)("inlineCode",{parentName:"p"},"N"),"(e. 2 and 654) use the ",(0,r.kt)("inlineCode",{parentName:"p"},'--ledgerCustomAddresses "[M, N]"'),"flag"),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'celocli account:list --useLedger --ledgerCustomAddresses "[M, N]"\n')))),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("strong",{parentName:"p"},"Advanced:")," Celo uses a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki"},"BIP-32")," derivation path of ",(0,r.kt)("inlineCode",{parentName:"p"},"m/44'/52752'/0'/0/index"),", where ",(0,r.kt)("inlineCode",{parentName:"p"},"index >= 0"),".  "))),(0,r.kt)("h3",{id:"performing-a-testnet-transaction-on-celo-cli"},"Performing a Testnet transaction on Celo CLI"),(0,r.kt)("p",null,"Before using your address on the Celo Mainnet, you may want to test it on the Celo Alfajores Testnet with the following instructions."),(0,r.kt)("p",null,"Visit the Alfajores Faucet and send yourself some testnet CELO at the following URL:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://celo.org/developers/faucet"},"https://celo.org/developers/faucet")),(0,r.kt)("p",null,"Check that you received the funds with the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"celocli account:balance <your-address> --node https://alfajores-forno.celo-testnet.org/\n")),(0,r.kt)("p",null,'Next, you\'ll need to enable "Contract Data" in the ledger app. Open the Celo\xa0App on your ledger device and go to Settings, then enable "Contract Data" to "Allowed". This setting is required because the celocli\xa0uses the ERC20 "pre-wrapped" version of CELO and so sending transactions requires sending data to a smart contract.'),(0,r.kt)("p",null,"Perform a test transaction by running the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"celocli transfer:gold --from=<your-address> --to=0x0000000000000000000000000000000000000001 --value=10000 --useLedger --node https://alfajores-forno.celo-testnet.org/\n")),(0,r.kt)("p",null,"You'll need to then approve the transaction on the Ledger device. Toggle right on the device until you see ",(0,r.kt)("inlineCode",{parentName:"p"},"Approve")," on screen. Press both buttons at the same time to confirm."),(0,r.kt)("p",null,"Finally, you can see if your transaction was mined on the network by copying the transaction hash (txHash) outputted by the command, and searching for it on the ",(0,r.kt)("a",{parentName:"p",href:"https://alfajores-blockscout.celo-testnet.org/"},"Alfajores Block Explorer"),"."),(0,r.kt)("h3",{id:"using-celocli"},"Using ",(0,r.kt)("inlineCode",{parentName:"h3"},"celocli")),(0,r.kt)("p",null,"You can use ",(0,r.kt)("inlineCode",{parentName:"p"},"celocli")," to securely sign transactions or proof-of-possessions with your Ledger."),(0,r.kt)("p",null,"To use ",(0,r.kt)("inlineCode",{parentName:"p"},"celocli")," with your Ledger, ensure the device is connected to your computer, unlocked, and the ",(0,r.kt)("inlineCode",{parentName:"p"},"Celo")," app is open and displaying ",(0,r.kt)("inlineCode",{parentName:"p"},"Application is ready"),"."),(0,r.kt)("p",null,"Then, simply append the ",(0,r.kt)("inlineCode",{parentName:"p"},"--useLedger")," flag to any ",(0,r.kt)("inlineCode",{parentName:"p"},"celocli")," commands with which you'd like to use a Ledger. You may also append the ",(0,r.kt)("inlineCode",{parentName:"p"},"--ledgerConfirmAddress")," flag, which will require that you manually verify on the Ledger the address from which the transaction is being sent."),(0,r.kt)("h2",{id:"view-account-balance"},"View Account Balance"),(0,r.kt)("p",null,"In order to view your account Balance on your Ledger with ",(0,r.kt)("inlineCode",{parentName:"p"},"celocli"),", you need to run the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# If you haven't set the node config to mainnet, do it first\ncelocli config:set --node=https://forno.celo.org\ncelocli account:balance <your-address>\n")),(0,r.kt)("p",null,"This will display the specific account balance for your address on Celo Mainnet."),(0,r.kt)("h2",{id:"receive-crypto-assets"},"Receive Crypto Assets"),(0,r.kt)("p",null,"In order to receive Celo on your address, whether it's CELO or cUSD or any stablecoin in the future, you must share your specific address with the sender."),(0,r.kt)("p",null,"Once a sender has confirmed they sent you the assets to your Ledger address, ask for the transaction ID which you can lookup on the ",(0,r.kt)("a",{parentName:"p",href:"https://explorer.celo.org/"},"Explorer"),"."),(0,r.kt)("h2",{id:"send-crypto-assets"},"Send Crypto Assets"),(0,r.kt)("p",null,"In order to send CELO or cUSD from your Ledger, you just need a recipient address to send to. Once you have that and the amount you would like to send (in our example, 10 CELO), we will go over how to send CELO using ",(0,r.kt)("inlineCode",{parentName:"p"},"celocli"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"celocli transfer:gold --from=<your-address> --to=<recipient-address> --value=10 --useLedger\n")),(0,r.kt)("p",null,"You'll need to then approve the transaction on the Ledger device. Toggle right on the device until you see ",(0,r.kt)("inlineCode",{parentName:"p"},"Approve")," on screen. Press both buttons at the same time to confirm."),(0,r.kt)("p",null,"You'll then get a transaction hash when it's confirmed that the transaction was mined by the network, and you can check the status of the transaction on the explorer ",(0,r.kt)("a",{parentName:"p",href:"https://explorer.celo.org"},"here"),"."),(0,r.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,r.kt)("p",null,"If you have issues connecting to the Ledger, try the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Check that the Ledger device is connected, powered on, and that you've unlocked it using the PIN."),(0,r.kt)("li",{parentName:"ul"},"Check that no other applications are using the device. Close Ledger Live. Stop any local Celo Blockchain node, or ensure it is run with the ",(0,r.kt)("inlineCode",{parentName:"li"},"--usb")," option."),(0,r.kt)("li",{parentName:"ul"},"Try unplugging and replugging the device. Some devices appear to trigger a warning on Macs saying: \u201cUSB Devices Disabled. Unplug the device using too much power to re-enable USB devices\u201d which is usually resolved by reconnecting."),(0,r.kt)("li",{parentName:"ul"},"Ensure that you are using the original cable supplied with your Ledger."),(0,r.kt)("li",{parentName:"ul"},"Ensure that your Ledger has the ",(0,r.kt)("a",{parentName:"li",href:"https://support.ledger.com/hc/en-us/articles/360002731113-Update-device-firmware"},"latest firmware"),". For Ledger Nano S, a firmware version of 1.6 or later is required."),(0,r.kt)("li",{parentName:"ul"},"Ensure that you are running the latest version of the Celo CLI.")),(0,r.kt)("p",null,"There have been reports of a possible ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/celo-org/celo-ledger-spender-app/issues/13"},"issue")," that appears to affect developer store apps on the Ledger Nano X including the Celo Ledger App. This is believed to be fixed in version 1.0.3. In earlier versions, a user clicking through the ",(0,r.kt)("inlineCode",{parentName:"p"},"Pending Ledger review")," notice too rapidly can cause the device to freeze. If this occurs, wait until the device's battery is depleted, then charge and power up again. Then use Ledger Live Manager to update the installed version of the Celo Ledger App."))}u.isMDXComponent=!0}}]);